# Lab 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞ CI/CD –≤ GitVerse —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Artifact Registry

–í —ç—Ç–æ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ –≤—ã –Ω–∞—É—á–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ Docker-–æ–±—Ä–∞–∑–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π GitVerse –≤ Artifact Registry.

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Å—Ä–µ–¥—É

[–ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Å—Ä–µ–¥—É](/prerequisites), –µ—Å–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏–ª–∏ —ç—Ç–æ—Ç —à–∞–≥ –≤ –Ω–∞—á–∞–ª–µ. 

### 2. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–µ—Å—Ç—Ä –≤ Artifact Registry –∏ –ø–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞

[–í –ø–µ—Ä–≤–æ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ](/lab1) –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—Ä–∞–∑–∞ –≤—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏ —Ä–µ–µ—Å—Ç—Ä –≤ —Å–µ—Ä–≤–∏—Å–µ Artifact Registry, –∞ —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–∞–ª–∏ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Ä–µ–µ—Å—Ç—Ä –∏ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞ –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ, –ø—Ä–æ–π–¥–∏—Ç–µ —à–∞–≥–∏ 3-4 –∏–∑ –ø–µ—Ä–≤–æ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã.  

### 3. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∫–æ–¥–∞ –≤ GitVerse

–°–æ–∑–¥–∞–π—Ç–µ —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å –≤ [GitVerse](https://gitverse.ru/){target=_blank}, –µ—Å–ª–∏ —É –≤–∞—Å –µ–µ –µ—â–µ –Ω–µ—Ç. 

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Cloud.ru —Å –ø—Ä–∏–º–µ—Ä–æ–º –∫–æ–¥–∞ REST API](https://gitverse.ru/cloudru/evo-containerapp-restapi-js-go-python-dotnet-sample){target=_blank} –∏ –Ω–∞–∂–º–∏—Ç–µ **–§–æ—Ä–∫**.

![fork](images/lab4/fork.png)

### 4. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ CI/CD –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–∞–Ω–Ω–µ—Ä

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**, –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ —á–µ–∫–±–æ–∫—Å **CI/CD** –∏ –Ω–∞–∂–º–∏—Ç–µ **–û–±–Ω–æ–≤–∏—Ç—å**.

![ci-cd-on](images/lab4/ci-cd-on.png)

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞–Ω–Ω–µ—Ä [–ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ GitVerse](https://gitverse.ru/docs/actions-conf/runners-uc/){target=_blank}.

### 5. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ YAML-—Ñ–∞–π–ª

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª **–°–µ–∫—Ä–µ—Ç—ã**, –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è:

- `EVOAR_KEYID` ‚Äî –ª–æ–≥–∏–Ω —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–ª—é—á–∞ (Key ID).
- `EVOAR_KEYSECRET` ‚Äî –ø–∞—Ä–æ–ª—å —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏–ª–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∫–ª—é—á–∞ (Key Secret).

![add-credentials](images/lab4/add-credentials.png)

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é **.github ‚Üí workflows** –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ YAML-—Ñ–∞–π–ª. 

–û—Ç–∫—Ä–æ–π—Ç–µ —Ä–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π EVDAR_URI —É–∫–∞–∂–∏—Ç–µ URI —Ä–µ–µ—Å—Ç—Ä–∞ –≤ Artifact Registry.
–ù–∞–∂–º–∏—Ç–µ **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å**. 

![edit-yaml](images/lab4/edit-yaml.png)

–ö–æ–º–º–∏—Ç –∑–∞–ø—É—Å—Ç–∏—Ç –ø–∞–π–ø–ª–∞–π–Ω, –∫–∞–∂–¥—ã–π —à–∞–≥ –∫–æ—Ç–æ—Ä–æ–≥–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ, —É–∫–∞–∑–∞–Ω–Ω–æ–º –≤ YAML‚Äë—Ñ–∞–π–ª–µ.

### 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –ø–∞–π–ø–ª–∞–π–Ω–∞

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —ç—Ç–∞–ø—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞ —Å–±–æ—Ä–∫–∏ –∑–∞–≤–µ—Ä—à–∏–ª–∏—Å—å —É—Å–ø–µ—à–Ω–æ.

![jobs-successed](images/lab4/jobs-successed.png)

üëç –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, –≤—ã —Ç–æ–ª—å–∫–æ —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ Docker-–æ–±—Ä–∞–∑–∞! –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–≥—Ä—É–∑–∫–µ –æ–±—Ä–∞–∑–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π GitVerse –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ–±—Ä–∞–∑ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –≤ —Ä–µ–µ—Å—Ç—Ä Artifact Registry.